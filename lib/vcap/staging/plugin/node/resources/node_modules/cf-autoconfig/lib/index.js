/*
 * Cloud Foundry auto-configuration
 */

(function () {

  if (require("cf-runtime").CloudApp.runningInCloud) {

    try {
      require("./server.js").setup();
      require("./mongodb.js").setup();
      require("./redis.js").setup();
      require("./mysql.js").setup();
      require("./postgresql.js").setup();
      require("./rabbitmq.js").setup();
    }
    catch (e) {
      // Something went wrong, rollback
      process.stderr.write("Auto-configuration for Cloud Foundry failed");
      for (var i in require.cache) delete require.cache[i];
    }

  }

})();